# CAG

## Metrics API   

### Llama   
**base:**
| Metric    | Value  |
| --------- | ------ |
| Accuracy  | 0.7700 |
| Precision | 0.8200 |
| Recall    | 0.8425 |
| F1 Score  | 0.8311 |
  
  
**CoT:**  
| Metric    | Run 1  | Run 2  | Run 3  | Avg        |
| --------- | ------ | ------ | ------ | ---------- |
| Accuracy  | 0.8400 | 0.8000 | 0.8700 | **0.8367** |
| Precision | 0.9012 | 0.8696 | 0.8961 | **0.8890** |
| Recall    | 0.9241 | 0.9396 | 0.9517 | **0.9385** |
| F1 Score  | 0.9125 | 0.9032 | 0.9231 | **0.9129** |

  
**CoT + Few-shot** 
| Metric    | Run 1  | Run 2  | Run 3  | Avg        |
| --------- | ------ | ------ | ------ | ---------- |
| Accuracy  | 0.8200 | 0.8700 | 0.8400 | **0.8433** |
| Precision | 0.8824 | 0.8947 | 0.8774 | **0.8848** |
| Recall    | 0.9643 | 0.9315 | 0.9444 | **0.9467** |
| F1 Score  | 0.9215 | 0.9128 | 0.9097 | **0.9146** |

 
### Qwen

**base:**
| Metric    | Run 1  | Run 2 |
| --------- | ------ | ----- |
| Accuracy  | 0.8700 | 0.8700 |
| Precision | 0.9245 | 0.9050 |
| Recall    | 0.9071 | 0.9062 |
| F1 Score  | 0.9442 | 0.9152 | 

  
**Few-shot** 
| Metric    | Run 1  | Run 2  | Run 3  | Avg        |
| --------- | ------ | ------ | ------ | ---------- |
| Accuracy  | 0.8700 | 0.9000 | 0.8600 | **0.8767** |
| Precision | 0.9847 | 0.9714 | 0.9701 | **0.9754** |
| Recall    | 0.8658 | 0.9315 | 0.8609 | **0.8861** |
| F1 Score  | 0.9214 | 0.9510 | 0.9123 | **0.9282** |

## Metrics Local

# Code generation

## Metrics API  

**Llama**

| Metric    | Value  |
| --------- | ------ |
| Accuracy 1 | 0.6650 |
| Accuracy 2 | 0.7600 |
| Accuracy 3 | 0.0000 |

Плохие кейсы

1. Predicted: [0.0, 0.0, 0.0, 0.0]     Answer: [0, 0, 0, 0] - после выполнения кода числа float, а в ответе int
2. Predicted: 2023-01-31 23:50:15+00:00      Answer: 2023-01-31 - после выполнения кода полная дата, ответ содержит только год месяц день
3. Predicted: [0.58, 0.61, 1.185]      Answer: ['0.58', '0.61', '1.185'] - плохо парсится ответ, числа спасил как строки
3. Predicted: ['0-50']      Answer: 0-50 - после выполнения кода вернулся список из одного str элемента, список не нужен
5. Модель забывает скобки и функцию any, all, mean применяет не ко всему выражению, а к части, из-за этого ответ не одно число, а результат применения функции ко всем строкам - получаем массив из 1000+ чисел.
6. Модель хочет найти максимум по строке :( - Code execution error: Column 'price' has dtype category, cannot use method 'nlargest' with this dtype 